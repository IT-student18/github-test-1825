<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<style>
html {	
    	width:100%;
    	height:100%;
	background-color: dimgrey;
}
body { 
    margin: auto;
    position: relative;
    padding: auto;
    text-wrap: wrap;
    width: 80vw;
}

body * {
	width: fit-content;
	margin: auto;
}
#eq {
	position:absolute;
	font-size:10vh;
	left:50%;
	transform: translate(-50%, 0%);
}
</style>
</head>

<body class="mt">
<br>
<h2 id="o1">noneYet</h2>
<svg width="80" height="80" id="eq">
  <circle cx="40" cy="40" r="28" visibility="hidden" stroke="black" stroke-width="3" fill="red" />
  <text x="40" y="43" font-size="90" fill="white" text-anchor="middle" alignment-baseline="middle">â˜º</text>
</svg>

<script type="module" >
let a = [0, 0];
const q = document.getElementById('eq');
const out1 = document.getElementById('o1');
let intervalId = Array(3).fill(null);
const vWid = window.innerWidth;
const vHei = window.innerHeight;

document.addEventListener('keydown', (event) => {
  if (event.key === ' ') {
    if (intervalId[0] === null) {
      intervalId[0] = setInterval(fall, 10);
      intervalId[1] = setInterval(createCirc, 3000);
      intervalId[2] = setInterval(moveCircs , 10);
    }
    a[1]=-6;
    if (event.target === document.body) event.preventDefault();
  }
});

function fall() {
	a[1]+=0.2;
	a[0]+=a[1];
	//console.log('works');
	q.style.top = a[0] + 'px';
	out1.innerHTML = a.map(num => num.toFixed(2)).join(', ');
}

function rdint(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function createCirc(){
  var ranar = Array.from({ length: 3 }, () => rdint(0, 255));
  let wid = `${rdint(50,200)}`;
  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
  svg.setAttribute('width', wid);
  svg.setAttribute('height', wid);
  svg.setAttribute('class', 'atacker');
  // svg.setAttribute('width', wid+3);
  // svg.setAttribute('height', wid+3); !!!!????
  svg.setAttribute('viewBox', `0 0 ${wid} ${wid}`);
  svg.style.position = 'absolute';
  svg.style.left = `${vWid - wid}px`;
  svg.style.top = `${rdint(0,vHei)}px`;
  
  const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
  circle.setAttribute('cx', wid/2);
  circle.setAttribute('cy', wid/2);
  circle.setAttribute('r', wid/2-3);
  circle.setAttribute('fill', `rgb(${ranar.join(',')})`);
  circle.setAttribute('stroke', 'black');
  circle.setAttribute('stroke-width', '3');

  const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
  text.setAttribute('x', wid/2);
  text.setAttribute('y', wid/2 + 5);
  text.setAttribute('font-size', '24');
  text.setAttribute('fill', 'white');
  text.setAttribute('text-anchor', 'middle');
  text.setAttribute('alignment-baseline', 'middle');
  text.textContent = 'lol';
  document.body.appendChild(svg);
  svg.appendChild(circle);
  svg.appendChild(text);
  console.log('works');

//   
  // Object.assign(el.style, {
  // color: '#f0f0f0',
  // fontWeight: 'bold',
  // backgroundColor: `rgb(${ranar.join(',')})`,
  // padding: '10px',
  // borderRadius: '50%',
  // display: 'flex',
  // alignItems: 'center',
  // justifyContent: 'center',
  // width: wid,
  // aspectRatio: 1/1,
  // position:'absolute',
  // left:`${vWid}px`,
  // top:`${rdint(0,vHei)}px`,
  // //top:`${q.style.top}`,
  // transform: 'translate(-50%, 0%)',
  // });
  // el.textContent = 'lol';
}

function moveCircs(){
  const arrOfElts = document.getElementsByClassName('atacker');
  Array.from(arrOfElts).forEach(element => {
    const wid1 = element.width.baseVal.value;
    const lef = parseFloat(getComputedStyle(element).left);
    element.style.left = `${lef - 3}px`;
    if (lef<= -wid1) element.style.left = `${vWid - wid1}px`;
  });
}


</script>

</body>
<!-- src="myScript.js"m-->
</html>
